<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü§ñ AI Asistente Educativo | ESP32 Project</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Audio -->
    <audio id="snd-clic" preload="auto">
        <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_115b6c7b7b.mp3" type="audio/mpeg">
    </audio>
    <audio id="snd-respuesta" preload="auto">
        <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_115b6c7b7b.mp3" type="audio/mpeg">
    </audio>
    <audio id="snd-win" preload="auto">
        <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_115b6c7b7b.mp3" type="audio/mpeg">
    </audio>
</head>
<body>
    <!-- Particles Background -->
    <div id="particles-js"></div>
    <div class="floating-elements">
        <div class="float-element">üåü</div>
        <div class="float-element">ü¶Ñ</div>
        <div class="float-element">üöÄ</div>
        <div class="float-element">üé®</div>
        <div class="float-element">üìö</div>
        <div class="float-element">üé™</div>
    </div>

    <!-- Header -->
    <header class="main-header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo-animation">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="logo-text">
                    <h1>AI Asistente Educativo</h1>
                    <p>Proyecto ESP32 - Aprendizaje Inclusivo</p>
                </div>
            </div>
            <div class="header-controls">
                <div class="theme-selector">
                    <button id="theme-btn" class="theme-btn" title="Cambiar tema">
                        <i class="fas fa-palette"></i>
                    </button>
                    <div class="theme-dropdown" id="theme-dropdown">
                        <div class="theme-option" data-theme="default">
                            <div class="theme-preview default-preview"></div>
                            <span>Cl√°sico</span>
                        </div>
                        <div class="theme-option" data-theme="ocean">
                            <div class="theme-preview ocean-preview"></div>
                            <span>Oc√©ano</span>
                        </div>
                        <div class="theme-option" data-theme="forest">
                            <div class="theme-preview forest-preview"></div>
                            <span>Bosque</span>
                        </div>
                        <div class="theme-option" data-theme="sunset">
                            <div class="theme-preview sunset-preview"></div>
                            <span>Atardecer</span>
                        </div>
                        <div class="theme-option" data-theme="space">
                            <div class="theme-preview space-preview"></div>
                            <span>Espacial</span>
                        </div>
                    </div>
                </div>
                <div class="status-indicator">
                    <div class="status-dot" id="connection-status"></div>
                    <span>Conectado</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Mode Selector -->
    <div class="mode-selector">
        <button class="mode-btn active" data-mode="docente" id="tab-docente">
            <div class="mode-icon">
                <i class="fas fa-chalkboard-teacher"></i>
            </div>
            <div class="mode-info">
                <h3>üë©‚Äçüè´ Modo Docente</h3>
                <p>Herramientas profesionales</p>
            </div>
        </button>
        
        <button class="mode-btn" data-mode="estudiante" id="tab-estudiante">
            <div class="mode-icon">
                <i class="fas fa-child"></i>
            </div>
            <div class="mode-info">
                <h3>ü¶Ñ Modo Estudiante</h3>
                <p>¬°Diversi√≥n y aprendizaje!</p>
            </div>
        </button>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar-docente">
            <div class="sidebar-title">üìÖ Calendario & Planeaci√≥n</div>
            <div class="sidebar-section">
                <div class="input-group">
                    <label><i class="fas fa-calendar"></i> Fecha</label>
                    <input type="date" id="plan-date">
                </div>
                <div class="input-group">
                    <label><i class="fas fa-edit"></i> T√≠tulo</label>
                    <input type="text" id="plan-title" placeholder="Ej: Actividad sensorial">
                </div>
                <div class="input-group">
                    <label><i class="fas fa-align-left"></i> Descripci√≥n</label>
                    <textarea id="plan-desc" rows="3" placeholder="Detalles de la actividad..."></textarea>
                </div>
                <button onclick="addPlan()" class="btn-primary">
                    <i class="fas fa-plus"></i> Agregar Actividad
                </button>
                
                <div class="calendar-list" id="calendar-list"></div>
                
                <div class="reminders-section">
                    <div class="section-title">‚è∞ Recordatorios</div>
                    <div class="input-group">
                        <label><i class="fas fa-clock"></i> Hora</label>
                        <input type="time" id="reminder-time">
                    </div>
                    <div class="input-group">
                        <label><i class="fas fa-bell"></i> Mensaje</label>
                        <input type="text" id="reminder-message" placeholder="Ej: Hora del recreo">
                    </div>
                    <button onclick="addReminder()" class="btn-primary">
                        <i class="fas fa-plus"></i> Agregar Recordatorio
                    </button>
                    <div class="reminders-list" id="reminders-list"></div>
                </div>

                <div class="export-section">
                    <button onclick="exportCalendarICS()" class="btn-export">
                        <i class="fab fa-google"></i> Exportar a Google Calendar
                    </button>
                    <button onclick="exportHistoryPDF()" class="btn-export" id="export-history">
                        <i class="fas fa-file-pdf"></i> Exportar Respuestas
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Docente Section -->
            <section id="section-docente" class="content-section active">
                <div class="hero-image docente-hero"></div>
                <div class="section-header">
                    <h2><i class="fas fa-graduation-cap"></i> Panel Docente</h2>
                    <div class="daily-joke" id="teacher-emojis">
                        <i class="fas fa-smile"></i> Cargando chiste del d√≠a...
                    </div>
                </div>

                <div class="content-grid">
                    <!-- Suggestions Card -->
                    <div class="feature-card suggestions-card">
                        <div class="card-header">
                            <i class="fas fa-lightbulb"></i>
                            <h3>Preguntas Sugeridas</h3>
                        </div>
                        <div class="card-content">
                            <div id="suggestions-docente" class="suggestions-grid"></div>
                        </div>
                    </div>

                    <!-- Progress Analytics Card -->
                    <div class="feature-card analytics-card">
                        <div class="card-header">
                            <i class="fas fa-chart-line"></i>
                            <h3>üìä An√°lisis de Progreso</h3>
                        </div>
                        <div class="card-content">
                            <div class="analytics-tabs">
                                <button class="analytics-tab active" data-tab="daily">Diario</button>
                                <button class="analytics-tab" data-tab="weekly">Semanal</button>
                                <button class="analytics-tab" data-tab="topics">Temas</button>
                            </div>
                            <div class="chart-container">
                                <canvas id="progress-chart"></canvas>
                            </div>
                            <div class="stats-summary" id="stats-summary"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Estudiante Section -->
            <section id="section-estudiante" class="content-section">
                <div class="hero-image estudiante-hero"></div>
                <div class="section-header student-header">
                    <h2>üåà ¬°Hola peque√±o genio! üåü</h2>
                    <div class="student-welcome">
                        <div class="welcome-animation">
                            <div class="welcome-emoji" id="student-emojis">ü¶Ñ üåà üêª üé® üöÄ</div>
                        </div>
                        <p>¬°Vamos a aprender cosas incre√≠bles juntos!</p>
                    </div>
                </div>

                <div class="content-grid student-grid">
                    <!-- Games Card -->
                    <div class="feature-card games-card">
                        <div class="card-header">
                            <i class="fas fa-gamepad"></i>
                            <h3>üéÆ Zona de Juegos</h3>
                        </div>
                        <div class="card-content">
                            <div class="games-grid">
                                <div class="game-item" onclick="showMiniGame('dino')">
                                    <div class="game-icon">ü¶ñ</div>
                                    <h4>Dinosaurio</h4>
                                    <p>¬°Salta y esquiva!</p>
                                </div>
                                <div class="game-item" onclick="showMiniGame('memory')">
                                    <div class="game-icon">üß†</div>
                                    <h4>Memoria</h4>
                                    <p>Encuentra las parejas</p>
                                </div>
                                <div class="game-item" onclick="showMiniGame('english')">
                                    <div class="game-icon">üá¨üáß</div>
                                    <h4>Ingl√©s</h4>
                                    <p>Aprende palabras</p>
                                </div>
                            </div>
                            <button id="random-game-btn" class="btn-game">
                                <i class="fas fa-dice"></i> ¬°Juego Sorpresa!
                            </button>
                        </div>
                    </div>

                    <!-- Student Suggestions -->
                    <div class="feature-card questions-card">
                        <div class="card-header">
                            <i class="fas fa-question-circle"></i>
                            <h3>‚ùì Preg√∫ntale a tu amigo robot</h3>
                        </div>
                        <div class="card-content">
                            <div id="suggestions-estudiante" class="student-suggestions"></div>
                        </div>
                    </div>

                    <!-- Achievements Card -->
                    <div class="feature-card achievements-card">
                        <div class="card-header">
                            <i class="fas fa-trophy"></i>
                            <h3>üèÜ Mis Logros</h3>
                        </div>
                        <div class="card-content">
                            <div id="achievements-grid" class="achievements-grid"></div>
                            <div class="progress-section">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="student-progress"></div>
                                </div>
                                <p id="progress-text">¬°Sigue preguntando para desbloquear m√°s logros!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Question Area -->
            <div class="question-container">
                <div class="question-wrapper">
                    <form id="ask-form" class="question-form">
                        <div class="input-container">
                            <i class="fas fa-comment"></i>
                            <input type="text" id="question" placeholder="Escribe tu pregunta aqu√≠..." autocomplete="off">
                            <button type="submit" class="ask-btn">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                            <button type="button" id="voice-btn" class="voice-btn">
                                <i class="fas fa-microphone"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Response Area -->
            <div class="response-container">
                <div id="response" class="response-box"></div>
            </div>

            <!-- Chat History -->
            <div class="chat-container">
                <div class="chat-header">
                    <h3><i class="fas fa-history"></i> Historial de Conversaciones</h3>
                    <button id="clear-history" class="btn-clear">
                        <i class="fas fa-trash"></i> Limpiar
                    </button>
                </div>
                <div id="chat-history" class="chat-history"></div>
            </div>

            <!-- Voice Controls -->
            <div class="voice-controls">
                <button id="voice-read-btn" class="voice-control-btn">
                    <i class="fas fa-volume-up"></i> Leer
                </button>
                <button id="voice-pause-btn" class="voice-control-btn">
                    <i class="fas fa-pause"></i> Pausar
                </button>
                <button id="voice-stop-btn" class="voice-control-btn">
                    <i class="fas fa-stop"></i> Detener
                </button>
            </div>
        </div>
    </div>

    <!-- Game Modal -->
    <div id="minigame-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <div id="minigame-content"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="footer-content">
            <p><i class="fas fa-microchip"></i> ESP32 IA Asistente ¬© 2025 | Dise√±ado para inclusi√≥n y aprendizaje</p>
            <p class="footer-tip" id="footer-tip">üí° Tip: Usa el micr√≥fono si necesitas ayuda para escribir</p>
        </div>
    </footer>

    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-robot">
                <i class="fas fa-robot"></i>
            </div>
            <div class="loading-text">
                <h2>Iniciando IA Asistente...</h2>
                <div class="loading-bar">
                    <div class="loading-progress"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
